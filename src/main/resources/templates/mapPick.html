<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マップバン選択</title>
    <link rel="stylesheet" href="/css/mapPick.css">
</head>
<body>
    <div class="container">
        <!-- 左側チーム -->
        <div class="team-box team-left" th:classappend="${session.mapPickCount == 2 ? 'highlight' : ''}">
            <div class="team-header">マップピックチーム</div>
            <div class="team-name" th:text="${session.team.teamName1}"></div>
        </div>

        <!-- 右側チーム -->
        <div class="team-box team-right" th:classappend="${session.mapPickCount == 1 ? 'highlight' : ''}">
            <div class="team-header">マップバンチーム</div>
            <div class="team-name" th:text="${session.team.teamName2}"></div>
        </div>
    </div>
	
	<!-- round text表示 -->
	<div class="round-text">
	    <span th:text="${roundText}"></span>
	</div>

    <!-- マップ選択リスト -->
    <div>
        <h2>マップ選択</h2>
        <div class="map-list">
            <!-- マップリストを表示 -->
            <div th:each="map : ${session['maps']}">
                <div class="map-box">
                    <!-- BANされてるマップには「BAN」表示 -->
                    <div th:if="${#lists.contains(session['banMap'], map)}" class="ban-overlay">
                        BAN
                    </div>

                    <!-- BANされていないマップだけ選択可能 -->
                    <form th:unless="${#lists.contains(session['banMap'], map)}" th:action="@{/mapPick}" method="post">
                        <input type="hidden" th:name="mapId" th:value="${map.id}" />
                        <button type="submit" style="border: none; padding: 0; background: transparent;">
                            <img class="map-image" th:src="@{'/' + ${map.maps_name} + '.PNG'}" alt="マップアイコン" />
                        </button>
                    </form>

                    <!-- BANされたマップは画像のみ表示（クリック不可） -->
                    <div th:if="${#lists.contains(session['banMap'], map)}">
                        <img class="map-image disabled-map" th:src="@{'/' + ${map.maps_name} + '.PNG'}" alt="マップアイコン" />
                    </div>
                </div>
            </div>
        </div>

        <!-- メッセージの表示 -->
        <div class="message" th:if="${session.mapPickCount == 1}">
            <span th:text="${session.team.teamName2} + 'が1マップバンします'"></span>
        </div>
        
        <div class="message" th:if="${session.mapPickCount == 2}">
            <span th:text="${session.team.teamName1} + 'がマップを選択します'"></span>
        </div>
    </div>
</body>
</html>
